# Meshtastic Telemetry Logger Configuration Example
# Copy this file to .env and customize the values below

# Meshtastic Connection Configuration
# Choose ONE connection method by setting the appropriate variables
MESHTASTIC_CONNECTION_TYPE=serial  # Options: serial, tcp, ble

# Serial Connection (default)
MESHTASTIC_SERIAL_PORT=/dev/ttyUSB0        # auto = auto-detect, or specific port like /dev/ttyUSB0

# TCP Connection (for WiFi/Ethernet connected devices)
MESHTASTIC_TCP_HOST=192.168.1.100  # IP address of your Meshtastic device
MESHTASTIC_TCP_PORT=4403           # Port (default: 4403)

# Bluetooth Low Energy (BLE) Connection
MESHTASTIC_BLE_ADDRESS=12:34:56:78:9A:BC  # MAC address of your Meshtastic device

# Timeout settings (in seconds)
TELEMETRY_TIMEOUT=300          # Timeout for telemetry requests (5 minutes)
NODES_TIMEOUT=300              # Timeout for nodes list requests (5 minutes)
WEATHER_TIMEOUT=300            # Timeout for weather integration (5 minutes)
ML_TIMEOUT=300                 # Timeout for ML processing (5 minutes)
CONNECTION_TIMEOUT=30          # Connection timeout (30 seconds)
MAX_RETRIES=3                  # Maximum connection retries
RETRY_INTERVAL=60              # Time to wait before retrying after failure (seconds)

# Polling interval (how long to wait between runs)
POLLING_INTERVAL=300           # 5 minutes between data collection cycles

# Weather API configuration
WEATHER_API_KEY=your_api_key_here  # Your OpenWeatherMap API key (optional)
WEATHER_CACHE_TTL=3600         # Weather cache time-to-live in seconds (1 hour)

# Node monitoring configuration
# Comma-separated list of node IDs to monitor for telemetry
# Replace these with your actual node IDs
MONITORED_NODES="!9eed0410,!2c9e092b,!849c4818,!fd17c0ed,!a0cc8008,!ba656304,!2df67288,!277db5ca"

# Geographic defaults (used when GPS data unavailable)
DEFAULT_LATITUDE=50.1109       # Frankfurt, Germany - change to your location
DEFAULT_LONGITUDE=8.6821

# Debug settings
DEBUG_MODE=false               # Set to true for verbose debug output
LOG_TELEMETRY_REQUESTS=true    # Log individual telemetry requests

# ML settings
ML_ENABLED=true                # Enable/disable machine learning features
ML_TIMEOUT=120                 # Timeout for ML operations (seconds)
ML_MIN_DATA_POINTS=5           # Minimum data points needed for ML predictions
ML_LEARNING_RATE=0.1           # Learning rate for bias correction
ML_HISTORICAL_WINDOW=50        # Number of historical data points to analyze

# Weather settings
WEATHER_CACHE_TTL=3600         # Weather cache duration in seconds (3600 = 1 hour)

# Network Activity News Settings
NEWS_ENABLED=true              # Enable network activity news section
NEWS_TIME_WINDOW=24            # Time window for news in hours (24 = last 24 hours)
NEWS_MAX_HOPS=2                # Maximum hops to include in news (0=direct, 1=1 hop, 2=2 hops, etc.)

# Chart generation configuration
# Comma-separated list of node IDs to include in charts (subset of MONITORED_NODES)
CHART_NODES="!2df67288,!a0cc8008"
CHART_NODE_NAMES="TRUTZTURM Solar (TRZS),DL0TRZ Trutzturm Oppenheim (TRZT)"
CHART_SIZE_MULTIPLIER=1.0      # Chart size multiplier (1.0 = default, 1.5 = 150% size)
CHART_DPI=300                  # Chart resolution in DPI (dots per inch)
CHART_FIGSIZE_WIDTH=16         # Chart width in inches
CHART_FIGSIZE_HEIGHT=20        # Chart height in inches

# File paths (relative to script directory)
TELEMETRY_CSV="telemetry_log.csv"
NODES_CSV="nodes_log.csv"
HTML_OUTPUT="stats.html"
POWER_PREDICTIONS_CSV="power_predictions.csv"
PREDICTION_ACCURACY_CSV="prediction_accuracy.csv"
WEATHER_PREDICTIONS_JSON="weather_predictions.json"

# Logging Configuration
LOG_LEVEL=INFO                 # Log level: DEBUG, INFO, WARN, ERROR
LOG_TELEMETRY_REQUESTS=true    # Log individual telemetry requests
LOG_TO_FILE=true               # Enable file logging
ERROR_LOG="error.log"          # Error log file path

# Data Retention (for automatic cleanup)
MAX_TELEMETRY_DAYS=30          # Keep telemetry data for X days (0 = unlimited)
MAX_LOG_SIZE_MB=100            # Maximum log file size before rotation
BACKUP_OLD_DATA=true           # Backup old data before deletion
NODES_LOG="nodes_log.txt"
ERROR_LOG="error.log"
HTML_OUTPUT="stats.html"
WEATHER_PREDICTIONS="weather_predictions.json"
POWER_PREDICTIONS="power_predictions.csv"
PREDICTION_ACCURACY="prediction_accuracy.csv"
